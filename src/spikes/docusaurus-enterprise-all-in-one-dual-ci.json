{
  "id": "docusaurus-enterprise-all-in-one-dual-ci",
  "name": "Docusaurus エンタープライズ一発セット + Dual CI (GH Pages/Cloudflare)",
  "version": "1.0.0",
  "stack": ["react", "docusaurus", "algolia", "i18n", "analytics", "pwa", "versioning", "ci"],
  "tags": ["docs", "static-site", "all-in-one", "enterprise", "docusaurus", "dual-ci"],
  "description": "All-in-one (DocSearch + i18n + GA + PWA + sitemap + versioning) に GitHub Pages と Cloudflare Pages の2種CIを同梱し、READMEで切替手順を提示。",
  "params": [
    { "name": "app_name", "default": "docusaurus-enterprise-dual" },
    { "name": "title", "default": "My Docusaurus Docs" },
    { "name": "url", "default": "https://<owner>.github.io" },
    { "name": "baseUrl", "default": "/<repo>/" },
    { "name": "org", "default": "owner" },
    { "name": "repo", "default": "repo" },
    { "name": "version", "default": "1.0.0" },
    { "name": "ga_tracking_id", "default": "G-XXXXXXXXXX" },
    { "name": "algolia_app_id", "default": "APP_ID" },
    { "name": "algolia_api_key", "default": "API_KEY" },
    { "name": "algolia_index_name", "default": "docs" },
    { "name": "cf_account_id", "default": "YOUR_ACCOUNT_ID" },
    { "name": "cf_project_name", "default": "docs" }
  ],
  "files": [
    { "path": "{{app_name}}/package.json", "template": "{\n  \"name\": \"{{app_name}}\",\n  \"private\": true,\n  \"scripts\": {\n    \"start\": \"docusaurus start\",\n    \"build\": \"docusaurus build\",\n    \"serve\": \"docusaurus serve\"\n  },\n  \"dependencies\": {\n    \"@docusaurus/core\": \"latest\",\n    \"@docusaurus/preset-classic\": \"latest\",\n    \"@docusaurus/plugin-pwa\": \"latest\",\n    \"react\": \"^18.0.0\",\n    \"react-dom\": \"^18.0.0\"\n  }\n}\n" },
    { "path": "{{app_name}}/docusaurus.config.js", "template": "// @ts-check\n/** @type {import('@docusaurus/types').Config} */\nmodule.exports = {\n  title: '{{title}}', url: '{{url}}', baseUrl: '{{baseUrl}}',\n  favicon: 'img/favicon.ico', organizationName: '{{org}}', projectName: '{{repo}}',\n  i18n: { defaultLocale: 'en', locales: ['en', 'ja'] },\n  themeConfig: {\n    gtag: { trackingID: process.env.GA_ID || '{{ga_tracking_id}}', anonymizeIP: true },\n    algolia: { appId: process.env.ALGOLIA_APP_ID || '{{algolia_app_id}}', apiKey: process.env.ALGOLIA_API_KEY || '{{algolia_api_key}}', indexName: process.env.ALGOLIA_INDEX_NAME || '{{algolia_index_name}}' }\n  },\n  plugins: [[ '@docusaurus/plugin-pwa', { debug: false, offlineModeActivationStrategies: ['appInstalled', 'standalone', 'queryString'], pwaHead: [ { tagName: 'link', rel: 'icon', href: '/img/logo.png' }, { tagName: 'link', rel: 'manifest', href: '/manifest.json' }, { tagName: 'meta', name: 'theme-color', content: '#0ea5e9' } ] } ]],\n  presets: [[ '@docusaurus/preset-classic', ({ docs: { sidebarPath: require.resolve('./sidebars.js') }, blog: false, sitemap: { changefreq: 'weekly', priority: 0.5, trailingSlash: false }, theme: { customCss: [] } }) ]]\n};\n" },
    { "path": "{{app_name}}/sidebars.js", "template": "// @ts-check\n/** @type {import('@docusaurus/plugin-content-docs').SidebarsConfig} */\nmodule.exports = { docs: [{ type: 'autogenerated', dirName: '.' }] };\n" },
    { "path": "{{app_name}}/docs/intro.md", "template": "---\nid: intro\nslug: /\ntitle: Introduction\n---\n\n# {{title}}\n\nAll-in-one + Dual CI (GitHub Pages / Cloudflare Pages).\nSee DEPLOY-README.md for selection and required secrets.\n" },
    { "path": "{{app_name}}/i18n/ja/docusaurus-plugin-content-docs/current/intro.md", "template": "---\nid: intro\nslug: /\ntitle: はじめに\n---\n\n# {{title}} (日本語)\n\nAll-in-one + デプロイ先をGitHub Pages/Cloudflare Pagesから選べます。\n" },
    { "path": "{{app_name}}/versions.json", "template": "[\n  \"{{version}}\"\n]\n" },
    { "path": "{{app_name}}/versioned_docs/version-{{version}}/intro.md", "template": "---\nid: intro\nslug: /\ntitle: Introduction (v{{version}})\n---\n\n# {{title}} v{{version}}\n\nVersioned docs root.\n" },
    { "path": "{{app_name}}/versioned_sidebars/version-{{version}}-sidebars.json", "template": "{ \n  \"docs\": [ { \"type\": \"autogenerated\", \"dirName\": "." } ] \n}\n" },
    { "path": "{{app_name}}/static/manifest.json", "template": "{\n  \"name\": \"{{title}}\",\n  \"short_name\": \"Docs\",\n  \"start_url\": \"/\",\n  \"display\": \"standalone\",\n  \"background_color\": \"#ffffff\",\n  \"theme_color\": \"#0ea5e9\",\n  \"icons\": []\n}\n" },
    { "path": "{{app_name}}/.github/workflows/deploy-ghpages.yml", "template": "name: Deploy to GitHub Pages\n\non:\n  push:\n    branches: [ main ]\n  pull_request:\n    branches: [ main ]\n\npermissions:\n  contents: read\n  pages: write\n  id-token: write\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/setup-node@v4\n        with:\n          node-version: 20\n      - run: npm ci\n      - run: npm run build\n      - uses: actions/upload-pages-artifact@v3\n        with:\n          path: build\n  deploy:\n    needs: build\n    runs-on: ubuntu-latest\n    environment: ${{ github.event_name == 'pull_request' && 'github-pages-preview' || 'github-pages' }}\n    steps:\n      - id: deployment\n        uses: actions/deploy-pages@v4\n        with:\n          preview: ${{ github.event_name == 'pull_request' }}\n" },
    { "path": "{{app_name}}/.github/workflows/deploy-cloudflare.yml", "template": "name: Deploy to Cloudflare Pages\n\non:\n  push:\n    branches: [ main ]\n  workflow_dispatch: {}\n\njobs:\n  build-and-deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/setup-node@v4\n        with:\n          node-version: 20\n      - run: npm ci\n      - run: npm run build\n      - name: Publish to Cloudflare Pages\n        uses: cloudflare/pages-action@v1\n        with:\n          apiToken: ${{ secrets.CLOUDFLARE_API_TOKEN }}\n          accountId: {{cf_account_id}}\n          projectName: {{cf_project_name}}\n          directory: build\n          gitHubToken: ${{ secrets.GITHUB_TOKEN }}\n" },
    { "path": "{{app_name}}/DEPLOY-README.md", "template": "# Deploy Targets\n\nThis template includes two workflows:\n- .github/workflows/deploy-ghpages.yml (GitHub Pages)\n- .github/workflows/deploy-cloudflare.yml (Cloudflare Pages)\n\nEnable and keep only the one you need.\n\n## Secrets\n- GA_ID, ALGOLIA_APP_ID, ALGOLIA_API_KEY, ALGOLIA_INDEX_NAME (optional)\n- For Cloudflare: CLOUDFLARE_API_TOKEN (required), accountId/projectName in workflow\n\n## Notes\n- PR to main triggers GH Pages preview build (if GH workflow enabled)\n- Push to main deploys to the selected target\n" }
  ]
}

