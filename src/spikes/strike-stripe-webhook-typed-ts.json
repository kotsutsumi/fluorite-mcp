{
  "id": "strike-stripe-webhook-typed-ts",
  "name": "stripe webhook typed ts",
  "version": "0.1.0",
  "stack": [
    "stripe",
    "ts"
  ],
  "tags": [
    "webhook",
    "typed",
    "generated",
    "strike"
  ],
  "description": "Auto-generated spike for stripe webhook in ts (typed).",
  "params": [
    {
      "name": "app_name",
      "default": "stripe-webhook-app"
    },
    {
      "name": "priceId",
      "required": false,
      "description": "Stripe Price ID",
      "default": "price_123"
    }
  ],
  "files": [
    {
      "path": "src/payments/stripe.ts",
      "template": "import Stripe from 'stripe';\nconst apiKey = process.env.STRIPE_API_KEY || '';\nexport const stripe = new Stripe(apiKey, { apiVersion: '2024-06-20' as any });\nexport async function createCheckoutSession(priceId: string){\n  return stripe.checkout.sessions.create({ mode: 'subscription', line_items: [{ price: priceId, quantity: 1 }], success_url: 'https://example.com/success', cancel_url: 'https://example.com/cancel' });\n}\n"
    },
    {
      "path": "app/api/stripe/webhook/route.ts",
      "template": "import { NextResponse } from 'next/server';\nimport Stripe from 'stripe';\nconst stripe = new Stripe(process.env.STRIPE_API_KEY || '', { apiVersion: '2024-06-20' as any });\nconst endpointSecret = process.env.STRIPE_WEBHOOK_SECRET || '';\nexport async function POST(req: Request){\n  const sig = req.headers.get('stripe-signature') || '';\n  const body = await req.text();\n  let event: Stripe.Event;\n  try { event = stripe.webhooks.constructEvent(body, sig, endpointSecret); }\n  catch (err){ return new NextResponse('invalid signature', { status: 400 }); }\n  switch(event.type){ case 'checkout.session.completed': break; default: break; }\n  return NextResponse.json({ received: true });\n}\n"
    },
    {
      "path": "spikes/strike-stripe-webhook-typed-ts.ts.txt",
      "template": "# Spike: stripe webhook (ts)\n// Auto-generated spike stub for stripe (webhook)\nexport function demo() {\n  console.log('use stripe - webhook (typed)');\n}\n"
    },
    {
      "path": "spikes/strike-stripe-webhook-typed-ts.md",
      "template": "# stripe webhook (typed, ts)\n\nThis is an auto-generated spike template.\n"
    }
  ],
  "patches": []
}
