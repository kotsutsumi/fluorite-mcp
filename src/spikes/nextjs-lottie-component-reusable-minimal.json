{
  "id": "nextjs-lottie-component-reusable-minimal",
  "name": "Next.js Lottie 再利用コンポーネント 最小",
  "version": "1.0.0",
  "stack": ["nextjs", "react", "lottie"],
  "tags": ["nextjs", "app-router", "client", "lottie", "component"],
  "description": "LottiePlayerコンポーネントを作成し、url/loop/autoplay/speed/startFrame等のPropsで再利用する最小例。",
  "params": [
    { "name": "lottie_url", "default": "https://assets9.lottiefiles.com/packages/lf20_5ngs2ksb.json" }
  ],
  "files": [
    { "path": "src/components/LottiePlayer.tsx", "template": "'use client';\nimport React, { useEffect, useRef, useState } from 'react';\nimport Lottie, { LottieRefCurrentProps } from 'lottie-react';\nexport type LottiePlayerProps = { url: string; loop?: boolean; autoplay?: boolean; speed?: number; startFrame?: number; className?: string; style?: React.CSSProperties };\nexport function LottiePlayer({ url, loop=true, autoplay=true, speed=1, startFrame=0, className, style }: LottiePlayerProps){\n  const ref = useRef<LottieRefCurrentProps>(null);\n  const [data, setData] = useState<any|null>(null);\n  useEffect(()=>{ let alive=true; fetch(url).then(r=>r.json()).then(j=>{ if(alive) setData(j); }); return ()=>{ alive=false; }; },[url]);\n  useEffect(()=>{ if(ref.current && speed) ref.current.setSpeed?.(speed); },[speed]);\n  useEffect(()=>{ if(ref.current && startFrame) ref.current.goToAndPlay?.(startFrame, true); },[startFrame]);\n  return <div className={className} style={style}>{data ? <Lottie lottieRef={ref} animationData={data} loop={loop} autoplay={autoplay} /> : 'Loading...'}</div>;\n}\nexport default LottiePlayer;\n" },
    { "path": "app/lottie-components/page.tsx", "template": "'use client';\nimport React from 'react';\nimport LottiePlayer from '@/src/components/LottiePlayer';\n\nexport default function Page(){\n  const url = process.env.NEXT_PUBLIC_LOTTIE_URL || '{{lottie_url}}';\n  return (\n    <main style={{ fontFamily: 'sans-serif', padding: 24, display:'grid', gap:16 }}>\n      <h1>Lottie Reusable Component</h1>\n      <LottiePlayer url={url} autoplay loop speed={1} style={{ width: 240, height: 240 }} />\n      <LottiePlayer url={url} autoplay={false} loop={false} startFrame={60} style={{ width: 240, height: 240 }} />\n    </main>\n  );\n}\n" }
  ]
}

