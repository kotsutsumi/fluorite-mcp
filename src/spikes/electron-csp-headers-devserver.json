{
  "id": "electron-csp-headers-devserver",
  "name": "Electron CSP(HTTPヘッダ) + DevServer 最小",
  "version": "1.0.0",
  "stack": ["electron"],
  "tags": ["electron", "csp", "devserver"],
  "description": "ローカルHTTPサーバからCSPヘッダ付きで配信し、BrowserWindow.loadURLで読み込む最小例。",
  "params": [{ "name": "app_name", "default": "electron-csp-headers" }],
  "files": [
    { "path": "{{app_name}}/server.js", "template": "const http = require('http');\nconst html = `<!doctype html><html><head><meta charset=\"utf-8\"></head><body><h1>CSP via header</h1><script>console.log('ok')</script></body></html>`;\nhttp.createServer((req,res)=>{ res.setHeader('Content-Security-Policy', \"default-src 'self'; script-src 'self'\"); res.end(html); }).listen(3001, ()=> console.log('dev server on 3001'));\n" },
    { "path": "{{app_name}}/main.js", "template": "const { app, BrowserWindow } = require('electron');\nrequire('./server');\nasync function createWindow(){ const win = new BrowserWindow({ width: 800, height: 600, webPreferences: { contextIsolation: true, nodeIntegration: false } }); await win.loadURL('http://localhost:3001'); }\napp.whenReady().then(createWindow);\n" }
  ]
}

