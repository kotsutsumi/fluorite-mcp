{
  "id": "docusaurus-env-secrets-best-practices",
  "name": "Docusaurus Secrets/ENV ベストプラクティス 最小",
  "version": "1.0.0",
  "stack": ["react", "docusaurus", "env", "secrets"],
  "tags": ["docs", "static-site", "secrets", "env", "docusaurus"],
  "description": "DocSearch/GAなどのキーを環境別に切替えるベストプラクティス最小構成（.env.example と README 付き）。",
  "params": [
    { "name": "app_name", "default": "docusaurus-env" },
    { "name": "title", "default": "My Docusaurus Docs" },
    { "name": "url", "default": "https://example.com" },
    { "name": "baseUrl", "default": "/" }
  ],
  "files": [
    { "path": "{{app_name}}/package.json", "template": "{\n  \"name\": \"{{app_name}}\",\n  \"private\": true,\n  \"scripts\": {\n    \"start\": \"docusaurus start\",\n    \"build\": \"cross-env NODE_ENV=production docusaurus build\",\n    \"serve\": \"docusaurus serve\"\n  },\n  \"dependencies\": {\n    \"@docusaurus/core\": \"latest\",\n    \"@docusaurus/preset-classic\": \"latest\",\n    \"cross-env\": \"^7.0.3\",\n    \"react\": \"^18.0.0\",\n    \"react-dom\": \"^18.0.0\"\n  }\n}\n" },
    { "path": "{{app_name}}/.env.example", "template": "# Docusaurus example env\n# Analytics\nGA_ID=G-XXXXXXXXXX\n# DocSearch\nALGOLIA_APP_ID=APP_ID\nALGOLIA_API_KEY=API_KEY\nALGOLIA_INDEX_NAME=docs\n# Deployment\nSITE_URL=https://example.com\nBASE_URL=/\n" },
    { "path": "{{app_name}}/docusaurus.config.js", "template": "// @ts-check\nrequire('dotenv').config();\n/** @type {import('@docusaurus/types').Config} */\nconst isProd = process.env.NODE_ENV === 'production';\nmodule.exports = {\n  title: '{{title}}',\n  url: process.env.SITE_URL || '{{url}}',\n  baseUrl: process.env.BASE_URL || '{{baseUrl}}',\n  favicon: 'img/favicon.ico',\n  organizationName: 'example',\n  projectName: '{{app_name}}',\n  themeConfig: {\n    gtag: { trackingID: process.env.GA_ID || '', anonymizeIP: true },\n    algolia: {\n      appId: process.env.ALGOLIA_APP_ID || '',\n      apiKey: process.env.ALGOLIA_API_KEY || '',\n      indexName: process.env.ALGOLIA_INDEX_NAME || ''\n    }\n  },\n  presets: [[ '@docusaurus/preset-classic', ({ docs: { sidebarPath: require.resolve('./sidebars.js') }, blog: false, sitemap: { changefreq: isProd ? 'weekly' : 'never', priority: 0.5, trailingSlash: false }, theme: { customCss: [] } }) ]]\n};\n" },
    { "path": "{{app_name}}/sidebars.js", "template": "// @ts-check\n/** @type {import('@docusaurus/plugin-content-docs').SidebarsConfig} */\nmodule.exports = { docs: [{ type: 'autogenerated', dirName: '.' }] };\n" },
    { "path": "{{app_name}}/docs/intro.md", "template": "---\nid: intro\nslug: /\ntitle: Introduction\n---\n\n# {{title}}\n\nENV/Secrets ベストプラクティス最小構成です。`DEPLOY-README.md` を参照してください。\n" },
    { "path": "{{app_name}}/DEPLOY-README.md", "template": "# ENV / Secrets Best Practices\n\n## Local\n- Copy `.env.example` to `.env` and fill keys\n- Run `npm start` for local preview\n\n## CI (GitHub Actions)\n- Add repository secrets: `GA_ID`, `ALGOLIA_APP_ID`, `ALGOLIA_API_KEY`, `ALGOLIA_INDEX_NAME`, `SITE_URL`, `BASE_URL`\n- `NODE_ENV=production` is set during build\n\n## Config patterns\n- Docusaurus config reads `process.env.*` directly\n- Sitemap disabled in non-production\n- Switch keys by environment without code changes\n" }
  ]
}

