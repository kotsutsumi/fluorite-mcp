{
  "id": "infra-ci-sops-secrets-github-actions",
  "name": "Infra CI SOPS Secrets (GitHub Actions) 最小",
  "version": "1.0.0",
  "stack": ["kubernetes", "ci", "sops"],
  "tags": ["infra", "ci", "sops", "secrets"],
  "description": "SOPSで暗号化したSecret YAMLをCIで復号→kubectl applyする最小例（概念）。",
  "files": [
    { "path": ".github/workflows/sops-secrets.yml", "template": "name: Apply SOPS Secrets\n\non:\n  workflow_dispatch: {}\n\njobs:\n  apply:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - name: Install sops\n        run: |\n          sudo apt-get update && sudo apt-get install -y sops\n      - name: Decrypt and apply\n        env:\n          SOPS_AGE_KEY: ${{ secrets.SOPS_AGE_KEY }}\n        run: |\n          sops -d k8s/secret.enc.yaml | kubectl apply -f -\n" }
  ]
}

