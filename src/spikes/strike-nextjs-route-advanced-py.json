{
  "id": "strike-nextjs-route-advanced-py",
  "name": "nextjs route advanced py",
  "version": "0.1.0",
  "stack": [
    "nextjs",
    "py"
  ],
  "tags": [
    "route",
    "advanced",
    "generated",
    "strike"
  ],
  "description": "Auto-generated spike for nextjs route in py (advanced).",
  "params": [
    {
      "name": "app_name",
      "default": "nextjs-route-app"
    }
  ],
  "files": [
    {
      "path": "app/api/health/route.ts",
      "template": "import { NextResponse } from 'next/server';\nexport async function GET(){ return NextResponse.json({ ok: true }); }\n"
    },
    {
      "path": "app/api/echo/route.ts",
      "template": "import { NextResponse } from 'next/server';\nimport { z } from 'zod';\nconst Body = z.object({ message: z.string().min(1) });\nexport async function POST(req: Request){ const json = await req.json(); const parsed = Body.safeParse(json); if(!parsed.success) return NextResponse.json({ error: parsed.error.format() }, { status: 400 }); return NextResponse.json({ echo: parsed.data.message }); }\n"
    },
    {
      "path": "app/api/items/route.ts",
      "template": "import { NextResponse } from 'next/server';\nimport { z } from 'zod';\nconst Query = z.object({ page: z.coerce.number().int().min(1).default(1), limit: z.coerce.number().int().min(1).max(100).default(20) });\nexport async function GET(req: Request){ const url = new URL(req.url); const parsed = Query.safeParse(Object.fromEntries(url.searchParams)); if(!parsed.success){ return NextResponse.json({ error: parsed.error.flatten() }, { status: 400 }); } const { page, limit } = parsed.data; return NextResponse.json({ items: [], page, limit }); }\n"
    },
    {
      "path": "app/rsc/page.tsx",
      "template": "export default function Page(){ return <div>Server Component (RSC)</div>; }\n"
    },
    {
      "path": "app/csr/page.tsx",
      "template": "'use client';\nexport default function Page(){ return <div>Client Component (CSR)</div>; }\n"
    },
    {
      "path": "app/api/typed/route.ts",
      "template": "import { z } from 'zod';\nimport { ok, err } from '@/src/next/response';\nconst Payload = z.object({ name: z.string().min(1) });\nexport async function POST(req: Request){ try { const json = await req.json(); const parsed = Payload.parse(json); return ok({ message: 'Hello ' + parsed.name }); } catch(e){ return err(e, 400); } }\n"
    },
    {
      "path": "src/next/withRole.ts",
      "template": "import type { NextRequest } from 'next/server';\nexport function withRole(required: 'user'|'admin', handler: (req: NextRequest)=>Promise<Response>|Response){\n  return async (req: NextRequest) => {\n    const role = (req.headers.get('x-role') as 'user'|'admin') || 'user';\n    if (required === 'admin' && role !== 'admin') {\n      return new Response('Forbidden', { status: 403 });\n    }\n    return handler(req);\n  };\n}\n"
    },
    {
      "path": "src/next/security-headers.ts",
      "template": "export const securityHeaders = [\n  { key: 'X-Frame-Options', value: 'DENY' },\n  { key: 'X-Content-Type-Options', value: 'nosniff' },\n  { key: 'Referrer-Policy', value: 'strict-origin-when-cross-origin' }\n];\n"
    },
    {
      "path": "spikes/strike-nextjs-route-advanced-py.py.txt",
      "template": "# Spike: nextjs route (py)\n# Auto-generated spike stub for nextjs (route)\ndef demo():\n    print('use nextjs - route (advanced)')\n"
    },
    {
      "path": "spikes/strike-nextjs-route-advanced-py.md",
      "template": "# nextjs route (advanced, py)\n\nThis is an auto-generated spike template.\n"
    }
  ],
  "patches": []
}
